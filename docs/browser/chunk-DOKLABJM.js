import{a as M}from"./chunk-XZOPVRI2.js";import{a as E}from"./chunk-XB6PQKIB.js";import{a as F}from"./chunk-IGA5LYX4.js";import"./chunk-ZYWE2HBZ.js";import{a as w}from"./chunk-KL2CPU5E.js";import"./chunk-4YLOEDTQ.js";import"./chunk-XNR3Y4KN.js";import"./chunk-NMJRHXIR.js";import{a as L}from"./chunk-Y3KLVRP5.js";import{d as B}from"./chunk-YMOXGVMI.js";import{Ec as D,Fb as y,Ib as p,Kb as d,Pa as c,Ya as s,Yb as a,Zb as T,a as u,b as C,cb as _,hc as I,ka as v,la as g,pb as h,qb as f,rb as S,tb as b,ub as x,vb as m,wb as i,xb as o,yb as k}from"./chunk-Z7HY6CCI.js";var R=()=>["/checkout"];function P(r,t){if(r&1){let e=y();i(0,"div",10)(1,"div",11)(2,"app-tour-cart",12),p("removeFromCart",function(l){v(e);let O=d(2);return g(O.deleteTourCart(l))}),o()()()}if(r&2){let e=t.$implicit;c(2),m("tour",e.tour)("cartItemId",e.tour.id)}}function V(r,t){if(r&1&&(i(0,"div",5),b(1,P,3,2,"div",10,S),o()),r&2){let e=d();c(),x(e.tourCart)}}function N(r,t){r&1&&(i(0,"div",6)(1,"p",13),a(2,"Your cart is empty"),o()())}var j=class r{constructor(t,e,n,l){this.seoService=t;this._BookingService=e;this.toaster=n;this._cdr=l}tourCart=[];haveData=!1;backgroundImage="../../../assets/image/cart-banner.jpg";ngOnInit(){this.seoService.updateSeoData({},"scrappe voyager - Cart","Manage your cart, bookings, and preferences with scrappe voyager. Access your account dashboard.","../../../assets/image/scrappe-voyager-logo.webp"),this.getListCart()}getListCart(){this._BookingService.getCartList().subscribe({next:t=>{setTimeout(()=>{this.tourCart=t.data,console.log("tourCart",this.tourCart),this.tourCart.length===0?this.haveData=!1:(this.haveData=!0,this.tourCart=t.data.map(e=>C(u({},e),{totalPrice:e.total_price||e.adults*e.tour.adult_price+e.children*e.tour.child_price+e.infants*e.tour.infant_price}))),this._cdr.markForCheck()},0)}})}deleteTourCart(t){this._BookingService.deleteTourCart(t).subscribe({next:e=>{console.log("deleteTourCart",e.data),this.toaster.success(e.message),setTimeout(()=>{this.getListCart()},0)},error:e=>{this.toaster.error(e.error.message)}})}clearTourCart(){this._BookingService.clearTourCart().subscribe({next:t=>{console.log("clearTourCart",t.data),this.toaster.success(t.message),setTimeout(()=>{this.getListCart()},0)},error:t=>{this.toaster.error(t.error.message)}})}static \u0275fac=function(e){return new(e||r)(s(L),s(M),s(w),s(D))};static \u0275cmp=_({type:r,selectors:[["app-cart"]],decls:17,vars:7,consts:[[3,"title","subtitle","backgroundImage"],[1,"my-5"],[1,"container","mx-auto","text-center"],[1,"h1"],[1,"textMainColor"],[1,"row","g-3","my-4"],[1,"text-center"],[1,"text-center","flexCenter","gap-3","mt-4"],[1,"secBtn",3,"click"],[1,"btn-success","btn","py-2","px-3","text-white","rounded-3",3,"routerLink"],[1,"col-md-6","col-lg-4"],[1,"position-relative"],[3,"removeFromCart","tour","cartItemId"],[1,"fs-2","textMainColor"]],template:function(e,n){e&1&&(k(0,"app-banner",0),i(1,"section",1)(2,"div",2)(3,"h3",3),a(4,"Shopping Cart"),o(),i(5,"p"),a(6," Your cart have "),i(7,"span",4),a(8),o(),a(9," items to book "),o(),h(10,V,3,0,"div",5)(11,N,3,0,"div",6),i(12,"div",7)(13,"button",8),p("click",function(){return n.clearTourCart()}),a(14,"Clear Cart"),o(),i(15,"button",9),a(16," Checkout "),o()()()()),e&2&&(m("title","Shopping Cart")("subtitle","Life is better with a full cart.")("backgroundImage",n.backgroundImage),c(8),T(n.tourCart.length),c(2),f(n.haveData?10:11),c(5),m("routerLink",I(6,R)))},dependencies:[F,B,E],styles:[".cart-container[_ngcontent-%COMP%]{padding:2rem}"]})};export{j as CartComponent};
