import{a as F}from"./chunk-XB6PQKIB.js";import{a as P}from"./chunk-SGXU4PYT.js";import{a as E}from"./chunk-IGA5LYX4.js";import"./chunk-ZYWE2HBZ.js";import"./chunk-KL2CPU5E.js";import"./chunk-4YLOEDTQ.js";import{a as k}from"./chunk-XNR3Y4KN.js";import"./chunk-NMJRHXIR.js";import{a as w}from"./chunk-Y3KLVRP5.js";import{a as O}from"./chunk-YMOXGVMI.js";import{Ec as S,Fa as _,Fb as C,Ib as b,Kb as m,L as u,Oc as T,Pa as a,Pc as R,Wc as x,Xc as D,Y as f,Ya as n,Yb as I,cb as h,hb as c,ka as v,la as y,vb as i,wb as p,xb as s,yb as g}from"./chunk-Z7HY6CCI.js";function j(o,t){o&1&&(p(0,"div",7)(1,"p",8),I(2,"No tours found in this category."),s()())}function M(o,t){if(o&1&&(p(0,"div",9),g(1,"app-tour-cart",10),s()),o&2){let e=t.$implicit;a(),i("tour",e)}}function A(o,t){if(o&1){let e=C();p(0,"div",3)(1,"div",7)(2,"app-pagination",11),b("pageChange",function(d){v(e);let l=m();return y(l.onPageChange(d))}),s()()()}if(o&2){let e=m();a(2),i("current_page",e.apiResponse.current_page)("total",e.apiResponse.total)("per_page",e.apiResponse.per_page)}}var L=class o{constructor(t,e,r,d,l){this.seoService=t;this.dataService=e;this._ActivatedRoute=r;this.cdr=d;this.platformId=l}backgroundImage="../../../assets/image/banner.webp";listTours=[];hasLoaded=!1;categorySlug=null;apiResponse={current_page:1,total:0,from:0,to:0,per_page:15};ngOnInit(){this.seoService.updateSeoData({},"scrappe voyager - Category","Explore tours by category.","../../../assets/image/scrappe-voyager-logo.webp"),this._ActivatedRoute.params.subscribe(t=>{this.categorySlug=t.slug,this.getListTours()})}getListTours(t=1){this.categorySlug&&this.dataService.getTours({category:this.categorySlug},t).pipe(f(e=>{this.listTours=e.data?.data||[],console.log("listTours by category",this.listTours),this.apiResponse={current_page:e.data?.current_page||1,total:e.data?.total||0,from:e.data?.from||0,to:e.data?.to||0,per_page:e.data?.per_page||15},this.hasLoaded=!0,D(this.platformId)?setTimeout(()=>{this.cdr.markForCheck()},0):this.cdr.detectChanges()}),u(()=>{this.cdr.markForCheck()})).subscribe({next:()=>{},error:e=>{console.error("Error fetching tours by category:",e),this.listTours=[],this.hasLoaded=!0,this.cdr.markForCheck()}})}onPageChange(t){this.getListTours(t)}static \u0275fac=function(e){return new(e||o)(n(w),n(k),n(O),n(S),n(_))};static \u0275cmp=h({type:o,selectors:[["app-category"]],decls:7,vars:6,consts:[[3,"title","subtitle","backgroundImage"],[1,"category-container"],[1,"container"],[1,"row"],["class","col-12",4,"ngIf"],["class","col-md-4",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"col-12"],[1,"no-tours"],[1,"col-md-4"],[3,"tour"],[3,"pageChange","current_page","total","per_page"]],template:function(e,r){e&1&&(g(0,"app-banner",0),p(1,"div",1)(2,"div",2)(3,"div",3),c(4,j,3,0,"div",4)(5,M,2,1,"div",5),s(),c(6,A,3,3,"div",6),s()()),e&2&&(i("title","Category")("subtitle","Explore our tours by category")("backgroundImage",r.backgroundImage),a(4),i("ngIf",r.hasLoaded&&r.listTours.length===0),a(),i("ngForOf",r.listTours),a(),i("ngIf",r.apiResponse.total>r.apiResponse.per_page))},dependencies:[x,T,R,F,E,P],styles:[".category-container[_ngcontent-%COMP%]{padding:60px 0}.category-container[_ngcontent-%COMP%]   .no-tours[_ngcontent-%COMP%]{text-align:center;padding:40px;font-size:1.2rem;color:#666}"]})};export{L as Category};
