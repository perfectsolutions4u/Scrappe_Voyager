import{b as j,d as z}from"./chunk-ZYWE2HBZ.js";import{a as A}from"./chunk-KL2CPU5E.js";import{a as V}from"./chunk-XNR3Y4KN.js";import{c as J,d as L}from"./chunk-YMOXGVMI.js";import{Fb as P,Ib as g,Ka as y,Kb as C,Nc as R,Pa as r,Ra as b,Uc as N,Wc as B,Ya as p,Yb as u,Zb as M,_b as c,cb as w,hc as k,ic as I,jc as x,ka as _,la as S,nc as E,oc as D,pb as f,qb as v,sb as T,tb as F,ub as O,vb as l,wb as n,xb as a,yb as m}from"./chunk-Z7HY6CCI.js";var H=i=>["/tour",i],U=(i,e)=>({"fa-heart":!0,"fa-regular":i,"fa-solid":e}),W=()=>[1,2,3,4,5];function $(i,e){if(i&1&&m(0,"i",10),i&2){let o=e.$implicit;l("ngClass",o?"fa fa-star text-warning":"fa-regular fa-star text-warning")}}function q(i,e){if(i&1&&(n(0,"span",13),m(1,"i",16),u(2),a(),m(3,"i",17)),i&2){let o=C();r(2),c(" ",o.tour.destinations[0].title," ")}}function G(i,e){if(i&1){let o=P();n(0,"button",18),g("click",function(d){_(o);let s=C();return S(s.onRemoveFromCart(s.cartItemId,d))}),u(1," Remove from cart "),a()}}function K(i,e){i&1&&(n(0,"button",15),u(1," Add to cart "),a())}var Y=class i{constructor(e,o,t,d){this._DataService=e;this.toaster=o;this._Router=t;this.translate=d}layoutType="grid";tour;cartItemId;removeFromCart=new b;favs=[];favouriteIds=[];alltours=[];ngOnInit(){this.loadFavouritesFromStorage()}loadFavouritesFromStorage(){if(typeof window<"u"&&typeof localStorage<"u"){let e=localStorage.getItem("favouriteIds");this.favouriteIds=e?JSON.parse(e):[]}}saveFavouritesToStorage(){if(typeof window<"u"&&typeof localStorage<"u"){let e=localStorage.getItem("favouriteIds"),o=e?JSON.parse(e):[],t=[...new Set([...o,...this.favouriteIds])];localStorage.setItem("favouriteIds",JSON.stringify(t)),this.favouriteIds=t}}addFav(e,o){if(o.stopPropagation(),!localStorage.getItem("accessToken")){this.toaster.error(this.translate.instant("common.youMustHaveAccount")),this._Router.navigate(["/login"]);return}this.loadFavouritesFromStorage();let t=this.favouriteIds.indexOf(e),d=t>-1;d?(this.favouriteIds.splice(t,1),localStorage.setItem("favouriteIds",JSON.stringify(this.favouriteIds))):(this.favouriteIds.includes(e)||this.favouriteIds.push(e),this.saveFavouritesToStorage()),this._DataService.toggleWishlist(e).subscribe({next:s=>{this.favs=s},error:s=>{if(d)this.favouriteIds.includes(e)||this.favouriteIds.push(e),this.saveFavouritesToStorage();else{let h=this.favouriteIds.indexOf(e);h>-1&&this.favouriteIds.splice(h,1),localStorage.setItem("favouriteIds",JSON.stringify(this.favouriteIds))}this.toaster.error(s.error.message)}})}onRemoveFromCart(e,o){o.preventDefault(),o.stopPropagation(),e!=null&&this.removeFromCart.emit(e)}static \u0275fac=function(o){return new(o||i)(p(V),p(A),p(J),p(j))};static \u0275cmp=w({type:i,selectors:[["app-tour-cart"]],inputs:{layoutType:"layoutType",tour:"tour",cartItemId:"cartItemId"},outputs:{removeFromCart:"removeFromCart"},decls:23,vars:24,consts:[["role","button",1,"tour","align-items-center","rounded-3","overflow-hidden","border","transition","p-2","ms-1","mb-1",3,"routerLink","ngClass"],[1,"px-0",3,"ngClass"],[1,"img-Hover","rounded-2","overflow-hidden","position-relative","mb-0"],["height","200px","loading","lazy",1,"w-100","transition",3,"src","alt","title"],[1,"text-white","fs-5","fw-bold","position-absolute","top-0","end-0","m-2",3,"click"],[1,"fa","fa-heart",3,"ngClass"],[1,"position-absolute","top-0","start-0","m-2"],[1,"text-white","fs-5"],[1,"p-2",3,"ngClass"],[1,"mb-1","fontsm"],[3,"ngClass"],[1,"text-capitalize","transition","cPointer",3,"routerLink"],[1,"fontsm","flexBetween","gap-2"],[1,"me-"],["type","button",1,"btn","btn-danger","text-nowrap","w-100","mt-4","transition","cPointer"],[1,"mainBtn","text-nowrap","w-100","mt-2"],[1,"fas","fa-location-dot","me-1","textSecondColor"],[1,"fa","fa-arrows-left-right","mx-","textSecondColor"],["type","button",1,"btn","btn-danger","text-nowrap","w-100","mt-4","transition","cPointer",3,"click"]],template:function(o,t){o&1&&(n(0,"div",0)(1,"div",1)(2,"figure",2),m(3,"img",3),n(4,"span",4),g("click",function(s){return t.tour&&t.tour.id&&t.addFav(t.tour.id,s)}),m(5,"i",5),a(),n(6,"span",6)(7,"b",7),u(8),E(9,"currency"),a()()()(),n(10,"div",8)(11,"figcaption")(12,"div",9),F(13,$,1,1,"i",10,T),a(),n(15,"h3",11),u(16),a(),n(17,"div",12),f(18,q,4,1),n(19,"span",13),u(20),a()(),f(21,G,2,0,"button",14)(22,K,2,0,"button",15),a()()()),o&2&&(l("routerLink",I(16,H,t.tour==null?null:t.tour.slug))("ngClass",t.layoutType==="grid"?"row gx-3 flex-column":"row gx-3 flex-wrap"),r(),l("ngClass",t.layoutType==="grid"?"":" col-md-5"),r(2),l("src",t.tour==null?null:t.tour.featured_image,y)("alt",t.tour==null?null:t.tour.title)("title",t.tour==null?null:t.tour.title),r(2),l("ngClass",x(18,U,t.tour&&t.tour.id?!t.favouriteIds.includes(t.tour.id):!0,t.tour&&t.tour.id?t.favouriteIds.includes(t.tour.id):!1)),r(3),M(D(9,14,t.tour==null?null:t.tour.start_from)),r(2),l("ngClass",t.layoutType==="grid"?"":" col-md-7"),r(3),O(k(21,W)),r(2),l("routerLink",I(22,H,t.tour==null?null:t.tour.slug)),r(),c(" ",t.tour==null?null:t.tour.title," "),r(2),v(t.tour&&t.tour.destinations&&t.tour.destinations.length>0?18:-1),r(2),c(" ",t.tour==null?null:t.tour.duration," "),r(),v(t.cartItemId!=null?21:22))},dependencies:[L,B,R,z,N],styles:[".tour[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;height:45px;color:#110f0f;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.tour[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]{height:100px}.tour[_ngcontent-%COMP%]:hover   h3[_ngcontent-%COMP%]{color:#105d63}.tour[_ngcontent-%COMP%]:hover   figcaption[_ngcontent-%COMP%]{height:auto}.tour[_ngcontent-%COMP%]:hover   .mainBtn[_ngcontent-%COMP%]{transform:translateY(10%)}.tour[_ngcontent-%COMP%]   .mainBtn[_ngcontent-%COMP%]{transform:translateY(140%);transition:all 1s ease-in-out}"]})};export{Y as a};
