<div
  [routerLink]="['/tour', tour?.slug]"
  role="button"
  [ngClass]="layoutType === 'grid' ? 'row gx-3 flex-column' : 'row gx-3 flex-wrap'"
  class="tour align-items-center rounded-3 overflow-hidden border transition p-2 ms-1 mb-1"
>
  <div [ngClass]="layoutType === 'grid' ? '' : ' col-md-5'" class="px-0">
    <figure class="img-Hover rounded-2 overflow-hidden position-relative mb-0">
      <img
        [src]="tour?.featured_image"
        class="w-100 transition"
        height="200px"
        [alt]="tour?.title"
        [title]="tour?.title"
        loading="lazy"
      />

      <span
        (click)="tour && tour.id && addFav(tour.id, $event)"
        class="textMainColor bg-white rounded-circle p-1 pb-0 fs-5 fw-bold position-absolute top-0 end-0 m-2 z-3"
      >
        <i
          [ngClass]="{
            'fa-heart': true,
            'fa-regular': tour && tour.id ? !favouriteIds.includes(tour.id) : true,
            'fa-solid': tour && tour.id ? favouriteIds.includes(tour.id) : false
          }"
          class="fa fa-heart"
        ></i>
      </span>

      <!-- <span class="position-absolute top-0 start-0 m-2">
        <b class="text-white fs-5">{{ tour?.start_from | currency }}</b>
      </span> -->
      <!-- @if (tour?.featured) {
      <span
        class="text-uppercase text-whit py-0 px-2 m-1 m-2 secBtn Btn position-absolute top-0 start-0"
        >{{ 'common.featured' | translate }}</span
      >
      } -->
    </figure>
  </div>

  <div [ngClass]="layoutType === 'grid' ? '' : ' col-md-7'" class="p-2">
    <figcaption>
      <!-- <div class="mb-1 fontsm">
          @for (filled of [1, 2, 3, 4, 5]; track filled) {
          <i [ngClass]="filled ? 'fa fa-star text-warning' : 'fa-regular fa-star text-warning'"></i>
          }
      </div> -->

      <h3 [routerLink]="['/tour', tour?.slug]" class="text-capitalize transition cPointer">
        {{ tour?.title }}
      </h3>

      <!-- destination -->
      @if (tour && tour.destinations && tour.destinations.length > 0) {
        <span class="destinationBox">
          <i class="fas fa-location-dot me-1 textSecondColor"></i>
            {{ tour.destinations[0].title }}
        </span>
      }
      @if (tour && tour.type ) {
        <span class="destinationBox typeBox">
            {{ tour.type }}
        </span>
      }

      <!-- duration - price -->
       <div class="flexBetween  align-items-end mt-3">
        <div>
          <span class="fontsm text-muted">start from</span> <br>
          <span class="textMainColor fs-5 fw-bold">
            {{ tour?.start_from | currency }}
          </span>
        </div>

        @if (tour && tour.duration ) {
          <div class="durationBox py-1 px-2 rounded-2 border">
            <i class="fa fa-calendar-days me-1 text-muted"></i>
            <span class="">
              {{ tour?.duration }}
            </span>
          </div>
        }

       </div>

      @if (cartItemId != null) {
      <button
        type="button"
        class="btn btn-danger text-nowrap w-100 mt-4 transition cPointer"
        (click)="onRemoveFromCart(cartItemId, $event)"
      >
        Remove from cart
      </button>
      } 
    </figcaption>
  </div>
</div>
